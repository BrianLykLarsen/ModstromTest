@using Archetype.Models
@using Archetype.Extensions
@using Archetype.PropertyConverters
@inherits Umbraco.Web.Mvc.UmbracoViewPage<ArchetypeFieldsetModel>

@{
	string headline = Model.GetValue<string>("headline");
	string text = Model.GetValue<string>("text");
	var selectCases = Model.GetValue<int[]>("selectCases").Select(x => Umbraco.TypedContent(x));

	<section class="section-testimonial-business">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<h2>@headline</h2>
					<div class="text-area">
						@Html.Raw(text)
					</div>
					<ul class="testimonials">
						@foreach (var comment in selectCases)
						{
							string pageHeadline = comment.GetPropertyValue<string>("pageHeadline");
							string pageDescription = comment.GetPropertyValue<string>("pageDescription");
							var image = comment.GetPropertyValue<IPublishedContent>("pageImage").Url;

							<li class="testimonial">
								<a href="@comment.Url" class="row">
									<figure class="col-sm-4 image-container">
										<div class="bg-container img-desktop responsiveimg-desktop responsiveimg-background-desktop" data-imgsrc-desktop="@image" data-imgalt-desktop="This is the alt text">
											<noscript>
												<img src="@image" alt="This is the alt text">
											</noscript>
										</div>
										<div class="bg-container img-mobile responsiveimg-mobile responsiveimg-background-mobile" data-imgsrc-mobile="@image" data-imgalt-mobile="This is the mobile alt text">
											<noscript>
												<img src="@image" alt="This is the mobile alt text">
											</noscript>
										</div>
									</figure>
									<div class="col-sm-8 text-container">
										<div class="testimonial-text">
											<h3>@pageHeadline</h3>
											<p>
												@Html.Raw(pageDescription)
											</p>
										</div>
									</div>
								</a>
							</li>

						}
					</ul>
					<a href="/" class="btn btn-dark">Se flere virksomhedscases</a>
				</div>
			</div>
		</div>
	</section>
}